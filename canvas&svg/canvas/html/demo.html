<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }
        .container {
            position: relative;
            margin: 10px;
        }
        #canvas {
            position: absolute;
            left: 0px;
        }
        #color {
            color: red;
            height: 21px;
        }
    </style>
</head>
<body>
    <div class="container">
        
        <p id="color"></p>
        <canvas id="canvas_2" width="300" height="300" style="background: #dbdbdb"></canvas>
        <canvas id="canvas" width="300" height="300"></canvas>
        <canvas id="_canvas" width="30" height="300"></canvas>

        <!-- <button id="invertbtn">invertbtn</button>
        <button id="grayscalebtn">grayscalebtn</button> -->

    </div>

    <script>
        var canvas_2 = document.getElementById('canvas_2');
        var ctx_2 = canvas_2.getContext('2d');

        ctx_2.lineWidth = 0.8;
        ctx_2.beginPath();
        for(var i = 0; i <= 30; i++){
            ctx_2.moveTo(10*i,0);
            ctx_2.lineTo(10*i,300);
            ctx_2.moveTo(0,10*i);
            ctx_2.lineTo(300,10*i);
        };
        ctx_2.stroke();
//-----------------------------------------------------------------------------

        // var canvas = document.getElementById('canvas');
        // var ctx = canvas.getContext('2d');
        // 改变坐标系
        // ctx.translate(150,150);
        // ctx.scale(1,-0.5);
        // ctx.moveTo(-150,0);
        // ctx.lineTo(150,0);
        // ctx.moveTo(0,-150);
        // ctx.lineTo(0,150);
        // ctx.lineWidth = 2;
        // ctx.stroke();
        // // 圆
        // ctx.beginPath();
        // ctx.arc(0,0,30,0,2*Math.PI);
        // ctx.closePath();
        // ctx.stroke();
        // // 椭圆
        // ctx.beginPath();
        // ctx.ellipse(-30,-60,30,60,0,0,Math.PI*2);
        // ctx.closePath();
        // ctx.stroke();
        // // Path2D
        // var p = new Path2D("M20 20 h 80 v 80 h -80 Z");
        // ctx.stroke(p);
        // // 圆 角度
        // var a = Math.PI/4;
        // ctx.beginPath();
        // ctx.moveTo(0,0);
        // ctx.lineTo(30*Math.sin(a),30*Math.cos(a));
        // ctx.closePath();
        // ctx.stroke();

// 查看色值 
        var img = new Image();
        img.src = '../images/test.png';
        img.crossOrigin = '*'
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');

        // ctx.imageSmoothingEnabled = false;
        // ctx.mozImageSmoothingEnabled = false;
        // ctx.webkitImageSmoothingEnabled = false;
        // ctx.msImageSmoothingEnabled = false;
        // img.onload = function() {
        //     // ctx.drawImage(img,0,0,10,10, 0, 0,200,200);
        //     ctx.drawImage(img,0,0);
        //     var Data = ctx.getImageData(0,0,300,300).data;
        //     Data[0] = 0;
        //     Data[1] = 0;
        //     Data[2] = 0;
        //     Data[3] = 255;
        //     console.log(Data[0],Data[1],Data[2],Data[3]);

        // };

        // var color = document.getElementById('color');
        // function pick(event) {
        //     var x = event.layerX;
        //     var y = event.layerY; 
        //     var pixel = ctx.getImageData(x, y, 1, 1);
        //     var data = pixel.data;
        //     var rgba = 'rgba(' + data[0] + ',' + data[1] + ',' + data[2] + ',' + (data[3] / 255) + ')';
        //     var coordinate = x + 1 + ',' + (y + 1);
        //     color.style.background =  rgba;
        //     color.textContent = coordinate +'----'+ rgba;
        // }
        // canvas.addEventListener('mousemove', pick);


// 取反色，取灰度
        // img.onload = function() {
        //     draw(this);
        //     console.log(ctx.getImageData(0,0,300,300).data);
        // };

        // function draw(img) {
        //     var canvas = document.getElementById('canvas');
        //     var ctx = canvas.getContext('2d');
        //     ctx.drawImage(img, 0, 0);
        //     img.style.display = 'none';
        //     var imageData = ctx.getImageData(0,0,canvas.width, canvas.height);
        //     var data = imageData.data;
                
        //     var invert = function() {
        //         for (var i = 0; i < data.length; i += 4) {
        //             data[i]     = 255 - data[i];     // red
        //             data[i + 1] = 255 - data[i + 1]; // green
        //             data[i + 2] = 255 - data[i + 2]; // blue
        //         }
        //         ctx.putImageData(imageData, 0, 0);
        //     };

        //     var grayscale = function() {
        //         for (var i = 0; i < data.length; i += 4) {
        //             var avg = (data[i] + data[i +1] + data[i +2]) / 3;
        //             data[i]     = avg; // red
        //             data[i + 1] = avg; // green
        //             data[i + 2] = avg; // blue
        //         }
        //         ctx.putImageData(imageData, 0, 0);
        //         console.log(ctx.getImageData(0,0,300,300).data);
        //     };

        //     var invertbtn = document.getElementById('invertbtn');
        //     invertbtn.addEventListener('click', invert);
        //     var grayscalebtn = document.getElementById('grayscalebtn');
        //     grayscalebtn.addEventListener('click', grayscale);
        // }

// 保存图片
    // toDataURL
        // var dataURL = canvas.toDataURL();
        // console.log(dataURL);

    // toBlob
        // canvas.toBlob(function(blob) {
        //     var url = URL.createObjectURL(blob);
        //     console.log(url);
        //     color.innerHTML = '<img src="'+ url +'">';
        // }, 'image/jpeg');


    // 这么操作像素店呢？
        // var _Canvas = document.createElement('canvas');
        // var _Context = _Canvas.getContext('2d');
        // // 设置屏幕外Canvas尺寸
        // _Canvas.width = 300;
        // _Canvas.height = 300;
        // img.onload = function() {
        //     _Context.drawImage(img, 0, 0);
        //     var imagedata = _Context.getImageData(0, 0, 300, 300);
        //     var Data = ctx.createImageData(300, 300);
        //     Data = imagedata;
        //     console.log(Data.data);
        //     ctx.putImageData(Data,0,0);
        // }

        
// putImageData
        // var _Canvas = document.createElement('canvas');
        // var _Context = _Canvas.getContext('2d');
        // // 设置屏幕外Canvas尺寸
        // _Canvas.width = 300;
        // _Canvas.height = 300;
        
        // // 此时可以得到imagedata数据
        // img.onload = function() {
        //     _Context.drawImage(img, 0, 0);
        //     var imagedata = _Context.getImageData(0, 0, 30, 30);
        //     ctx.putImageData(imagedata,35,35);
        // }
       

// createImageData
        // var imagedata = ctx.createImageData(300, 300);
        // imagedata.data[0] = 0;
        // imagedata.data[1] = 0;
        // imagedata.data[2] = 0;
        // imagedata.data[3] = '255';
        // ctx.putImageData(imagedata,2,2);
        // console.log(ctx.getImageData(0,0,300,300).data);

    // arc
        // ctx.beginPath();
        // ctx.arc(150, 75, 50, 0, Math.PI / 2, true);
        // ctx.stroke();

    // arcTo
        // ctx.beginPath();
        // ctx.moveTo(50, 100);
        // ctx.arcTo(150, 100, 200, 40, 40);
        // ctx.lineTo(200, 40);
        // ctx.stroke();

    // 二次贝塞尔曲线
        // ctx.strokeStyle = "red";
        // ctx.beginPath();
        // ctx.moveTo(50, 50);
        // ctx.quadraticCurveTo(100, 100, 250, 100);
        // ctx.stroke();



    // 三次贝塞尔曲线
        // ctx.beginPath();
        // ctx.rect(20,20,50,50)
        // ctx.stroke();


        // var ctx = canvas.getContext('2d');

        // var rectangle = new Path2D();
        // rectangle.rect(10, 10, 50, 50);

        // var circle = new Path2D();
        // circle.arc(100, 35, 25, 0, 2 * Math.PI);

        // ctx.stroke(rectangle);
        // ctx.fill(circle);


    // img
        // var img = new Image();
        // img.src = "../images/rhino.jpg";
        // img.onload = function() {
        //     ctx.drawImage(img,0,0,300,300,0,0,300,300);
        // }

    // save() restore()
        // ctx.fillRect(0,0,150,150);   // 使用默认设置绘制一个矩形
        // ctx.save();                  // 保存默认状态

        // ctx.fillStyle = '#09F'       // 在原有配置基础上对颜色做改变
        // ctx.fillRect(15,15,120,120); // 使用新的设置绘制一个矩形
        // ctx.save();  
        //                 // 保存当前状态
        // ctx.fillStyle = '#FFF'       // 再次改变颜色配置
        // ctx.globalAlpha = 0.5;    
        // ctx.fillRect(30,30,90,90);   // 使用新的配置绘制一个矩形

        // ctx.restore();               // 重新加载之前的颜色状态
        // ctx.fillRect(45,45,60,60);   // 使用上一次的配置绘制一个矩形

        // ctx.restore();               // 加载默认颜色配置
        // ctx.fillRect(60,60,30,30);   // 使用加载的配置绘制一个矩形



    // clip    
        var qwe = new Path2D();  
        qwe.rect(0,0,150,50);
        ctx.beginPath();
        ctx.arc(60,60,60,0,Math.PI*2,true);
        ctx.clip(qwe);
        ctx.fill();


    // beginPath
        // ctx.strokeStyle = 'red';
        // ctx.beginPath();
        // ctx.moveTo(60, 20);
        // ctx.lineTo(220, 20);
        // ctx.stroke();
        // ctx.closePath(); //
        // ctx.beginPath(); //
        // ctx.strokeStyle = 'yellow';
        // ctx.moveTo(60, 20);
        // ctx.lineTo(60, 120);
        // ctx.stroke();
        // ctx.closePath();







    // 动画
        // ctx.fillStyle = "yellow";

        // ---------普通
        // ctx.translate(30, 30);

        // setInterval(function() {
        //     // 清除上一次的矩形
        //     ctx.clearRect(-30, -30, canvas.width, canvas.height);

        //     // 旋转坐标系
        //     ctx.rotate(2 * Math.PI / 180);  //旋转叠加(在之前旋转的基础上再旋转)

        //     // 绘制图形
        //     ctx.fillRect(-10,-10,20,20);
        // }, 100)


    // 要用path命令
        // ctx.translate(30, 30);

        // setInterval(function() {
        //     // 清除上一次的矩形
        //     ctx.clearRect(-30, -30, canvas.width, canvas.height);

        //     // 旋转坐标系
        //     ctx.rotate( 2 * Math.PI / 180);  //旋转叠加(在之前旋转的基础上再旋转)

        //     ctx.beginPath();
        //     ctx.rect(-10,-10,20,20);  // 绘制图形
        //     ctx.fill();
        //     ctx.closePath();
        // }, 100)



    // ----------用 sava() restore()
        // var i = 0;
        // setInterval(function() {
        //     ctx.clearRect( 0, 0, canvas.width, canvas.height );

        //     ctx.save();

        //     ctx.translate(30,30);
        //     ctx.rotate(2*i*Math.PI/180);

        //     ctx.beginPath();
        //     ctx.rect(-10,-10,20,20);
        //     ctx.fill();
        //     ctx.closePath();

        //     ctx.restore();
        //     i++;
        // }, 100)


    // end

        // var raf;

        // var ball = {
        //     x: 100,
        //     y: 100,
        //     vx: 5,
        //     vy: 2,
        //     radius: 25,
        //     color: 'blue',
        //     draw: function() {
        //         ctx.beginPath();
        //         ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
        //         ctx.closePath();
        //         ctx.fillStyle = this.color;
        //         ctx.fill();
        //     }
        // };

        // function draw() {
        //     ctx.clearRect(0,0, canvas.width, canvas.height);
        // ball.draw();
        // if (ball.y + ball.vy + ball.radius > canvas.height || ball.y + ball.vy - ball.radius < 0) {
        //     ball.vy = -ball.vy;
        // }
        // if (ball.x + ball.vx + ball.radius > canvas.width || ball.x + ball.vx - ball.radius < 0) {
        //     ball.vx = -ball.vx;
        // }
        //     ball.x += ball.vx;
        //     ball.y += ball.vy;
        // raf = window.requestAnimationFrame(draw);
        // }

        // canvas.addEventListener('mouseover', function(e){
        //     raf = window.requestAnimationFrame(draw);
        // });

        // canvas.addEventListener('mouseout', function(e){
        //     window.cancelAnimationFrame(raf);
        // });

        // ball.draw();

    </script>
</body>
</html>